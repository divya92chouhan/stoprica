%h1
  %b.uppercase
    = @racer.last_name
  = @racer.first_name

%h4
  %b Klub:
  - if @racer.club.present?
    = link_to club_path(@racer.club) do
      = @racer.club.try(:name)
  - else
    Nema

- if user_signed_in?
  %h4
    %b Godina rodenja
    = @racer.year_of_birth
    %br
    %b Mjesto stanovanja
    = @racer.town

    - if current_user.admin?
      %br
      %b Velicina majice
      = @racer.shirt_size || '-'

      %br
      %b UCI ID
      = @racer.uci_id || '-'

      %br
      %b Personal best 20.1km
      = @racer.personal_best || '-'

- if user_signed_in? && (current_user.admin || current_user.racer == @racer)
  %p
    %b Kontakt:
    %ul
      %li
        = @racer.email
      %li
        %a{href: "tel:#{@racer.phone_number}"}
          = @racer.phone_number
      %li
        Adresa:
        = @racer.address
        = @racer.zip_code
        = @racer.town

%h4
  Utrke

%table.wide_table.mdl-data-table.mdl-js-data-table.mdl-shadow--2dp
  %thead
    %tr
      %th Utrka
      %th Kategorija
      %th Mjesto
      %th Vrijeme
      %th Razlika
  %tbody
    - @racer.race_results.sort{ |a, b| b.id <=> a.id }.each do |race_result|
      %tr
        %td= race_result.race.name
        %td= race_result.category.name
        %td
          = race_result.try(:position)
          - if (race_result.try(:position) || 0) <= 2 && race_result.status == 3
            = render partial: '/races/trophy', locals: { index: (race_result.try(:position) || 0) - 1 }
        %td= race_result.finish_time
        %td= race_result.finish_delta


%br
= link_to 'Natrag', racers_path, class: 'mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect'

- if user_signed_in? && current_user.admin
  = link_to 'Izmijeni podatke', edit_racer_path(@racer), class: 'mdl-button mdl-js-button mdl-button--raised mdl-button--accent mdl-js-ripple-effect'
